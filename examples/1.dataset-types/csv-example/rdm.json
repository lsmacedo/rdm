{
  "name": "Local CSV Dataset Example",
  "description": "Example CSV Dataset obtained from the URL below",
  "source": "https://gist.github.com/rioto9858/ff72b72b3bf5754d29dd1ebf898fc893",
  "input": {
    "file": {
      "path": "tracks.csv"
    }
  },
  "output": {
    "database": {
      "url": "postgres://postgres:postgrespassword@localhost/tracks",
      "tables": {
        "track": {
          "set": {
            "name": "_.title",
            "main_artist_id": "artist.id"
          },
          "strategy": "upsert",
          "uniqueConstraint": ["name", "main_artist_id"]
        },
        "artist": {
          "set": {
            "name": "_.artist"
          },
          "strategy": "upsert",
          "uniqueConstraint": ["name"]
        },
        "artist_track": {
          "set": {
            "artist_id": "artist.id",
            "track_id": "track.id"
          },
          "strategy": "upsert",
          "uniqueConstraint": ["artist_id", "track_id"]
        }
      }
    }
  }
}
