{
  "name": "Object Iteration Example",
  "description": "Example iterating through object by using * instead of the key name",
  "source": "https://api.coindesk.com/v1/bpi/currentprice.json",
  "input": {
    "file": {
      "path": "currentprice.json"
    }
  },
  "output": {
    "alias": {
      "_currencies": "_.bpi"
    },
    "database": {
      "url": "postgres://postgres:postgrespassword@localhost/currencies",
      "tables": {
        "currency": {
          "set": {
            "name": "_currencies.*.code",
            "label": "_currencies.*.description"
          },
          "strategy": "upsert",
          "uniqueConstraint": ["name"]
        },
        "rate": {
          "set": {
            "currency_id": "currency.id",
            "value": "_currencies.*.rate"
          },
          "strategy": "upsert",
          "uniqueConstraint": ["currency_id"]
        }
      }
    }
  }
}
