{
  "name": "Object Iteration Example",
  "description": "Example iterating through object by using * instead of the key name",
  "steps": [
    {
      "name": "_data",
      "description": "Read data from JSON file",
      "type": "file",
      "path": "currentprice.json"
    },
    {
      "description": "Save rows in database",
      "type": "database",
      "url": "postgres://postgres:postgrespassword@localhost/currencies",
      "tables": {
        "currency": {
          "set": {
            "name": "_data.bpi.*.code",
            "label": "_data.bpi.*.description"
          },
          "strategy": "upsert",
          "uniqueConstraint": ["name"]
        },
        "rate": {
          "set": {
            "currency_id": "currency.id",
            "value": "_data.bpi.*.rate"
          },
          "strategy": "upsert",
          "uniqueConstraint": ["currency_id"]
        }
      }
    }
  ]
}
